<Page
    x:Class="UnoApp1.Presentation.ProductDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UnoApp1.Presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:utu="using:Uno.Toolkit.UI"
    xmlns:um="using:Uno.Material"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid utu:SafeArea.Insets="VisibleBounds">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <utu:NavigationBar Content="Chi tiết sản phẩm" Grid.Row="0" />

        <ScrollViewer Grid.Row="1">
            <StackPanel Padding="20" Spacing="15">

                <Border CornerRadius="10" Background="White" Padding="10">
                    <Image Source="{Binding Product.imageUrl}" 
                   Height="300" 
                   Stretch="Uniform" 
                   HorizontalAlignment="Center"/>
                </Border>

                <TextBlock Text="{Binding Product.product_name}" 
                   FontSize="24" 
                   FontWeight="Bold" 
                   TextWrapping="Wrap" />

                <StackPanel Orientation="Horizontal" Spacing="5">
                    <TextBlock Text="{Binding Product.price, Converter={StaticResource CurrencyConverter}}" 
                       FontSize="22" 
                       Foreground="Red" 
                       FontWeight="Bold"/>
                    <TextBlock Text="đ" 
                       FontSize="22" 
                       Foreground="Red"/>
                </StackPanel>

                <MenuFlyoutSeparator />

                <!-- ⭐ THÊM PHẦN CHỌN SỐ LƯỢNG -->
                <StackPanel Spacing="10">
                    <TextBlock Text="Số lượng:" FontWeight="SemiBold" />

                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Button Command="{Binding DecreaseQuantityCommand}"
                            Width="40" Height="40"
                            CornerRadius="5"
                            Padding="0"             
                            Background="#E0E0E0" 
                            Foreground="Black">
                            <TextBlock Text="-" 
                           FontSize="24" 
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Margin="0,0,0,2"/>
                        </Button>

                        <Border Background="White" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1"
                        CornerRadius="5"
                        Width="60" Height="40"
                        Margin="5,0">
                            <TextBlock Text="{Binding Quantity}" 
               FontSize="18"
               FontWeight="Bold"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"/>
                        </Border>

                        <Button Command="{Binding IncreaseQuantityCommand}"
                            Width="40" Height="40"
                            CornerRadius="5"
                            Padding="0"             
                            Background="#E0E0E0"
                            Foreground="Black">

                            <TextBlock Text="+" 
                               FontSize="24" 
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Margin="0,0,0,2"/>   
                        </Button>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="5" Margin="0,10,0,0">
                        <TextBlock Text="Tạm tính:" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="{Binding TotalPrice, Converter={StaticResource CurrencyConverter}}" 
                       FontSize="20" 
                       Foreground="Red" 
                       FontWeight="Bold"/>
                        <TextBlock Text="đ" 
                       FontSize="20" 
                       Foreground="Red"
                       FontWeight="Bold"/>
                    </StackPanel>
                </StackPanel>

                <MenuFlyoutSeparator />

                <TextBlock Text="Thông tin chi tiết:" FontWeight="SemiBold" />

                <TextBlock Text="Ngày tạo:" FontWeight="SemiBold" Margin="0,10,0,0" />
                <TextBlock Text="{Binding Product.created_at}" Opacity="0.8" />

            </StackPanel>
        </ScrollViewer>

        <Border Grid.Row="2" 
                Padding="20" 
                Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                BorderBrush="LightGray"
                BorderThickness="0,1,0,0">

            <Button Command="{Binding AddToCartCommand}"
                    HorizontalAlignment="Stretch"
                    Height="50"
                    Background="Red"
                    Foreground="White">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <SymbolIcon Symbol="Add" Foreground="White"/>
                    <TextBlock Text="Thêm vào giỏ hàng" FontWeight="Bold"/>
                </StackPanel>
            </Button>
        </Border>

    </Grid>
</Page>
